<form class="manual_capture_btn">
    <input type="text" value="<%=spot_hash%>" name="spot_hash" hidden>
    <input type="number" value="<%=lot_id%>" name="lot_id" hidden>
    <button type="submit" class="btn indigo-text white">
        <a> Take a picture at this spot right now </a><i class="material-icons">camera_alt</i>
    </button>
</form>
<% for (let row = 0; row < spotCaptureData.length; row++) { %>
    <div class="col s12 m8 offset-m2 l6 offset-l3">
        <div class="card-panel grey lighten-5 z-depth-1">
            <div class="row valign-wrapper">
                <div class="col s12">
                <img src="<%= spotCaptureData[row].image_url %>" alt="" class="responsive-img"> <!-- notice the "circle" class -->
                </div>
                <div class="col s10">
                <span class="black-text">
                    Captured at <%= spotCaptureData[row].created_at %>
                </span>
                </div>
            </div>
        </div>
    </div>
<% } %>

<% if (spotCaptureData.length == 0) { %>
    No images captured yet.
<% } %>

<script>
$('.manual_capture_btn').submit(function(e) {
        e.preventDefault();
        const form = $(this);
        $.ajax({
            url: '/spots/manual_capture',
            type: 'PUT',
            data: form.serialize(),
            success: function(res) {
                window.location.reload();
            },
            error: function(err) {
                const toastHTML = `<div style="top: auto !important; right: auto !important; bottom: 10%; left: 7%;">
                                    <span>${err.responseText}</span>
                                   </div>`;
                M.toast({html: toastHTML});
            }
        });
    })
</script>